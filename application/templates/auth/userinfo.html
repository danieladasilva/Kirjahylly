{% extends "layout.html" %}

{% block body %}
<form method="GET" action="{{ url_for('auth_info') }}">
    <h2>Käyttäjän {{ user.name }} tiedot</h2>
    <p></p>
    <p>Käyttäjänimi: {{ user.username }}</p>

    {% if all_books is defined %}
    <p>Kirjoja kirjahyllyssä: {{ all_books }}</p>
    {% endif %}

    {% if read_books is defined %}
    <p>Luettuja kirjoja: {{ read_books }}</p>
    {% endif %}
    <p></p>
    <a href="{{ url_for('auth_edit_form') }}" class="button">Muokkaa tietoja</a>
    <p></p>
    <h3>Omat kirjat</h3>
    <br>
    <h5>Lukematta</h5>
    <table>
        <tr>
            <th style="padding:0 15px 0 15px;">Kirjan nimi</th>
            <th style="padding:0 15px 0 15px;">Kirjailijan nimi</th>
        </tr>
        {% for book in unread %}
        <tr>
            <td style="padding:0 15px 0 15px;">{{ book.name }}</td>
            <td style="padding:0 15px 0 15px;">{{ book.firstname }} {{ book.lastname }}</td>
            <td style="padding:0 15px 0 15px;">
                <form method="POST" action="{{ url_for('books_set_read_or_delete', book_id=book.book_id) }}">
                    <input type="submit" name="btn" value="Merkitse luetuksi"/>
                </form>
            </td>
            <td style="padding:0 15px 0 15px;">
                <form method="POST" action="{{ url_for('books_set_read_or_delete', book_id=book.book_id) }}">
                    <input type="submit" name="btn" value="Poista kirja"/>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    <br>
    <h5>Luetut</h5>
    <table>
        <tr>
            <th style="padding:0 15px 0 15px;">Kirjan nimi</th>
            <th style="padding:0 15px 0 15px;">Kirjailijan nimi</th>
        </tr>
        {% for book in read %}
        <tr>
            <td style="padding:0 15px 0 15px;">{{ book.name }}</td>
            <td style="padding:0 15px 0 15px;">{{ book.firstname }} {{ book.lastname }}</td>
            <td style="padding:0 15px 0 15px;">
                <form method="POST" action="{{ url_for('books_set_read_or_delete', book_id=book.book_id) }}">
                    <input type="submit" name="btn" value="Merkitse lukemattomaksi"/>
                </form>
            </td>
            <td style="padding:0 15px 0 15px;">
                <form method="POST" action="{{ url_for('books_set_read_or_delete', book_id=book.book_id) }}">
                    <input type="submit" name="btn" value="Poista kirja"/>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
</form>
{% endblock %}
